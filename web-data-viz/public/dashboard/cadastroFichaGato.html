<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrando um Felino</title>

    <link rel="stylesheet" href="../css/dashboard/assets/main-dash.css">
    <link rel="stylesheet" href="../css/dashboard/cadastroFicha.css">

    <script src="../js/sessao.js"></script>

</head>

<body>
    <div class="background-opacity"></div>
    <div class="container-body">

        <div class="container-cad-ficha">
            <div class="container-image">
                <div class="image">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ20ObDyZXSCOiOnkSFSoZmPZMesv_vwFuJag&s"
                        alt="">
                    <img class="image-moldura" src="../assets/componentes-img/moldura-cat.svg" alt="">
                </div>

                <input type="file" name="" id="input_file" accept="image/png, image/jpeg">

            </div>
            <div class="info">
                <div class="container-part1">
                    <div class="input-design">
                        <label for="input_nome">Nome do Felino:</label>
                        <input type="text" name="nome" id="input_nome">
                    </div>
                    <div class="input-design">
                        <label for="input_apelido">Apelido:</label>
                        <input type="text" name="apelido" id="input_apelido">
                    </div>
                    <div class="double-inputs">
                        <div class="input-design">
                            <label for="input_raca">Ra√ßa:</label>
                            <input type="text" name="raca" id="input_raca">
                        </div>
                        <div class="input-design">
                            <label for="input_dataNasc">Data de Nascimento:</label>
                            <input type="date" name="dataNasc" id="input_dataNasc">
                        </div>
                    </div>
                    <div class="input-design">
                        <label for="input_classe">Escolha uma Classe que Define o Felino:</label>
                        <select name="classe" id="select_classe">
                            <option value="" disabled selected>Selecione...</option>
                            <option value="1">Destruidor(a) de Sof√°s</option>
                            <option value="2">Ca√ßador(ar) de Ratos Fantasma</option>
                            <option value="3">Mestre da Soneca</option>
                            <option value="4">Fofoqueiro(a) da janela</option>
                            <option value="5">Artista do P√£ozinho Fofinho</option>
                            <option value="6">Mestre das Ronronadas Eternas</option>
                        </select>
                    </div>
                    <div class="input-design">
                        <label for="input_nome">Fale sobre a hist√≥ria do Felino:</label>
                        <textarea name="descricao" maxlength="300" id="input_descricao"></textarea>
                    </div>

                    <button>Proximo -></button>
                </div>

                <div class="container-part2" style="display: none;">
                    <label>Ataque:
                        <input type="range" name="atk" min="0" max="100" step="1" oninput="atkVal.value = this.value">
                        <output id="atkVal">50</output>
                    </label><br>

                    <label>Defesa:
                        <input type="range" name="def" min="0" max="100" step="1" oninput="defVal.value = this.value">
                        <output id="defVal">50</output>
                    </label><br>

                    <label>Agilidade:
                        <input type="range" name="agi" min="0" max="100" step="1" oninput="agiVal.value = this.value">
                        <output id="agiVal">50</output>
                    </label><br>

                    <label>Fome:
                        <input type="range" name="fome" min="0" max="100" step="1" oninput="fomeVal.value = this.value">
                        <output id="fomeVal">50</output>
                    </label><br>

                    <label>Sono:
                        <input type="range" name="sono" min="0" max="100" step="1" oninput="sonoVal.value = this.value">
                        <output id="sonoVal">50</output>
                    </label><br>

                    <button onclick="cadastrarFicha()">Salvar Gato üêæ</button>

                </div>
            </div>
        </div>

    </div>

</body>

</html>
<script>
    function cadastrarFicha() {
        var nome = input_nome.value;
        var apelido = input_apelido.value;
        var raca = input_raca.value;
        var dataNasc = input_dataNasc.value;
        var classe = select_classe.value;
        var descricao = input_descricao.value;

        var atk = atkVal.value;
        var def = defVal.value;
        var agi = agiVal.value;
        var fome = fomeVal.value;
        var sono = sonoVal.value;

        var idUser = sessionStorage.getItem('ID_USUARIO');
        var email = sessionStorage.getItem('EMAIL_USUARIO');


        fetch("/fichasGato/cadastrarFichaGato", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                idUserServer: idUser,
                emailServer: email,
                nomeServer: nome,
                apelidoServer: apelido,
                racaServer: raca,
                dataNascServer: dataNasc,
                classeServer: classe,
                descricaoServer: descricao,
                atkServer: atk,
                defServer: def,
                agiServer: agi,
                fomeServer: fome,
                sonoServer: sono,
            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);
                setTimeout(() => {
                    window.location.href = '/dashboard/cards.html'
                }, 4000)
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });

        return false;
    }
</script>